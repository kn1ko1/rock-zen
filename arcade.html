<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitive Arcade | 3-in-1</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #38bdf8;
            --gold: #fbbf24;
            --text: #f8fafc;
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        .arcade-container {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            height: 100vh;
            scroll-behavior: smooth;
        }

        .game-screen {
            flex: 0 0 100vw;
            height: 100vh;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .stats {
            display: flex; gap: 2.5rem; font-size: 1.5rem; font-weight: 800;
            color: var(--accent); text-transform: uppercase; margin-bottom: 1.2rem;
        }

        .instruction {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        /* --- RPS BATTLE ZONE --- */
        .battle-zone {
            display: flex;
            align-items: center;
            gap: 30px;
            background: rgba(0,0,0,0.2);
            padding: 20px 40px;
            border-radius: 20px;
            margin: 10px 0;
            border: 2px solid #334155;
        }
        .hand { font-size: 5rem; transition: transform 0.2s; }
        #timer-rps { font-size: 5rem; color: var(--gold); font-family: monospace; line-height: 1; }
        
        .rps-choices { display: flex; gap: 15px; }
        .emoji-btn { font-size: 4rem; background: var(--card); border: none; border-radius: 50%; padding: 24px; cursor: pointer; transition: 0.2s; }
        .emoji-btn:hover { transform: scale(1.1); background: #334155; }

        /* --- SCHULTE GRID --- */
        .schulte-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 14px; width: 480px; }
        .num-tile { 
            aspect-ratio: 1; background: var(--card); border-radius: 10px; 
            display: flex; justify-content: center; align-items: center; 
            font-weight: bold; cursor: pointer; transition: background 0.2s, color 0.2s; font-size: 2.2rem;
        }
        .num-tile.error {
            background: #f43f5e !important;
            color: #fff !important;
            z-index: 2;
            box-shadow: 0 0 0 3px #f43f5e55;
            transition: background 0.1s, color 0.1s;
        }

        /* --- MEMORY --- */
        .mem-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 18px; width: 600px; perspective: 1000px; }
        .card { aspect-ratio: 1; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
        .card.flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; justify-content: center; align-items: center; font-size: 2.7rem; border-radius: 14px; border: 1.5px solid rgba(255,255,255,0.1); }
        .card-front { background: var(--card); }
        .card-back { background: #334155; transform: rotateY(180deg); }

        .btn {
            margin-top: 2.5rem; background: transparent; border: 2.5px solid var(--accent);
            color: var(--accent); padding: 18px 40px; border-radius: 14px; font-weight: 900; cursor: pointer; text-transform: uppercase; font-size: 1.2rem;
        }
        .nav-hint { position: absolute; bottom: 20px; opacity: 0.3; font-size: 0.8rem; letter-spacing: 2px; }
    </style>
</head>
<body>

<div class="arcade-container" id="arcade">

    <section class="game-screen" id="rps-screen" style="position:relative;">
        <div class="stats">PLAYER: <span id="rps-pscore">0</span> | CPU: <span id="rps-cscore">0</span></div>
        <div class="instruction">CPU plays at 1s ‚Äî you have 1 second to counter it.</div>
        <button class="btn" id="rps-pause-btn" onclick="toggleRpsPause()" style="position:absolute; top:14px; right:14px; z-index:2; font-size:0.9rem; padding:6px 16px; opacity:0.5; min-width:unset; min-height:unset;">Pause</button>
        <div id="rps-overlay" style="display:none; position:absolute; inset:0; background:rgba(15,23,42,0.85); z-index:10; justify-content:center; align-items:center; border-radius:24px; flex-direction:column;">
            <h2 style="color:#fbbf24; font-size:2.5rem; margin-bottom:1.5rem;">PAUSED</h2>
            <button class="btn" onclick="toggleRpsPause()" style="background:var(--accent); color:white; font-size:1.3rem;">Resume</button>
        </div>
        <div id="timer-rps">5.000</div>
        <div class="battle-zone">
            <div><small style="display:block; opacity:0.5; margin-bottom:5px">YOU</small><div id="p-hand" class="hand">‚ùì</div></div>
            <div style="font-size:1.5rem; opacity:0.3">VS</div>
            <div><small style="display:block; opacity:0.5; margin-bottom:5px">CPU</small><div id="c-hand" class="hand">‚ùì</div></div>
        </div>
        <p id="rps-status" style="font-weight:bold; letter-spacing:2px; height: 1em;">READY?</p>
        <div class="rps-choices">
            <button class="emoji-btn" onclick="rpsMove('rock')">‚úä</button>
            <button class="emoji-btn" onclick="rpsMove('paper')">‚úã</button>
            <button class="emoji-btn" onclick="rpsMove('scissors')">‚úåÔ∏è</button>
        </div>
        <div class="nav-hint">SWIPE RIGHT FOR OBSERVATION ‚ûî</div>
    </section>

    <section class="game-screen" id="schulte-screen">
        <div class="stats">NEXT: <span id="schulte-target">1</span> | TIME: <span id="schulte-time">0.00</span>s</div>
        <div class="instruction">Locate and tap numbers 1 through 25 in ascending order.</div>
        <div class="schulte-grid" id="schulte-grid"></div>
        <button class="btn" onclick="initSchulte()">Reset Grid</button>
        <div class="nav-hint">‚¨Ö SWIPE LEFT | SWIPE RIGHT FOR MEMORY ‚ûî</div>
    </section>

    <section class="game-screen" id="memory-screen">
        <div class="stats">TRIES: <span id="mem-tries">0</span> | PAIRS: <span id="mem-pairs">0</span>/10</div>
        <div class="instruction">Flip cards to find the 10 matching emoji pairs.</div>
        <div class="mem-grid" id="mem-grid"></div>
        <button class="btn" onclick="initMemory()">Reset Memory</button>
        <div class="nav-hint">‚¨Ö SWIPE LEFT FOR OBSERVATION</div>
    </section>

</div>

<script>
    /* --- SYSTEM: OBSERVER --- */
    let rpsTimer;
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.target.id === 'rps-screen') {
                if (entry.isIntersecting) startRPS();
                else clearInterval(rpsTimer);
            }
        });
    }, { threshold: 0.6 });
    observer.observe(document.getElementById('rps-screen'));

    /* --- 1. REFLEX LOGIC --- */
    let rpsP = 0, rpsC = 0, rpsTime = 5000, rpsActive = false, cpuChoice = null, rpsPaused = false;
    const rpsIcons = { rock: '‚úä', paper: '‚úã', scissors: '‚úåÔ∏è', fail: '‚ùå' };

    function startRPS() {
        rpsTime = 5000; rpsActive = false; cpuChoice = null;
        document.getElementById('p-hand').innerText = '‚ùì';
        document.getElementById('c-hand').innerText = '‚ùì';
        document.getElementById('rps-status').innerText = "WAITING...";
        document.getElementById('rps-status').style.color = "white";
        document.getElementById('rps-pause-btn').innerText = 'Pause';
        document.getElementById('rps-overlay').style.display = 'none';
        rpsPaused = false;
        clearInterval(rpsTimer);
        rpsTimer = setInterval(() => {
            if (rpsPaused) return;
            rpsTime -= 10;
            document.getElementById('timer-rps').innerText = (rpsTime/1000).toFixed(3);
            if(rpsTime <= 1000 && !rpsActive) { 
                rpsActive = true; 
                document.getElementById('rps-status').innerText = "GO!"; 
                document.getElementById('rps-status').style.color = "#22c55e";
            }
            if(rpsTime <= 0) { 
                clearInterval(rpsTimer); 
                rpsC++; 
                document.getElementById('rps-status').innerText = "TOO SLOW!";
                document.getElementById('p-hand').innerText = '‚ùå';
                updateRPS(); 
                setTimeout(startRPS, 1500); 
            }
        }, 10);
    }

    function toggleRpsPause() {
        rpsPaused = !rpsPaused;
        const overlay = document.getElementById('rps-overlay');
        const btn = document.getElementById('rps-pause-btn');
        if (rpsPaused) {
            overlay.style.display = 'flex';
            btn.innerText = 'Resume';
        } else {
            overlay.style.display = 'none';
            btn.innerText = 'Pause';
        }
    }

    /* --- 2. SCHULTE LOGIC --- */
    let sTarget = 1, sStart, sInt;
    function initSchulte() {
        const g = document.getElementById('schulte-grid'); g.innerHTML = '';
        sTarget = 1; clearInterval(sInt); document.getElementById('schulte-time').innerText="0.00"; sStart = null;
        document.getElementById('schulte-target').innerText = sTarget;
        let nums = Array.from({length:25},(_,i)=>i+1).sort(()=>Math.random()-0.5);
        nums.forEach(n => {
            const d = document.createElement('div'); d.className='num-tile'; d.innerText=n;
            d.onclick = () => {
                if(!sStart) { sStart=Date.now(); sInt=setInterval(()=>document.getElementById('schulte-time').innerText=((Date.now()-sStart)/1000).toFixed(2),50); }
                if(n===sTarget){ 
                    d.classList.add('correct'); 
                    sTarget++; 
                    if(sTarget>25) {
                        clearInterval(sInt);
                        document.getElementById('schulte-target').innerText="DONE";
                    } else {
                        document.getElementById('schulte-target').innerText = sTarget;
                    }
                }
            };
            g.appendChild(d);
        });
    }

    /* --- 3. MEMORY LOGIC --- */
    const emojis = ['üöÄ','ü™ê','‚òÑÔ∏è','üõ∞Ô∏è','üî≠','üõ∏','üëæ','üåå','üöó','üèçÔ∏è'];
    let mFlipped = [], mPairs = 0, mTries = 0, mLock = false;
    function initMemory() {
        const g = document.getElementById('mem-grid'); g.innerHTML = ''; mFlipped = []; mPairs = 0; mTries = 0; mLock = false;
        let cards = [...emojis, ...emojis].sort(()=>Math.random()-0.5);
        cards.forEach(e => {
            const c = document.createElement('div'); c.className='card';
            c.innerHTML = `<div class="card-face card-front"></div><div class="card-face card-back">${e}</div>`;
            c.onclick = () => {
                if(mLock || c.classList.contains('flipped')) return;
                c.classList.add('flipped'); mFlipped.push(c);
                if(mFlipped.length === 2) {
                    mTries++; mLock = true;
                    if(mFlipped[0].innerText === mFlipped[1].innerText) { mPairs++; mFlipped=[]; mLock=false; }
                    else { setTimeout(()=>{ mFlipped.forEach(x=>x.classList.remove('flipped')); mFlipped=[]; mLock=false; }, 800); }
                    document.getElementById('mem-tries').innerText=mTries; document.getElementById('mem-pairs').innerText=mPairs;
                }
            };
            g.appendChild(c);
        });
    }

    initSchulte();
    initMemory();
</script>
</body>
</html>